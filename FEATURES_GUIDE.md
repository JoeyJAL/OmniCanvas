# OmniCanvas 新功能指南

## 🎉 新增功能总览

OmniCanvas 现已支持两个强大的新功能，可帮助您更好地与他人共享创意和管理您的艺术作品：

1. **❤️ 收藏 + 复制功能** - 本地保存和导入画布
2. **🌍 公开分享链接** - 生成可分享的公开链接

---

## 功能 1：收藏 + 复制功能

### 概述
允许您保存当前画布为收藏，稍后可以加载或复制到新画布中进行编辑。所有收藏都存储在您的浏览器中。

### 如何使用

#### 保存当前画布为收藏
1. 在顶部导航栏中找到 **"Favorites"** 按钮（红心图标）
2. 点击打开收藏面板
3. 点击 **"Save Current Canvas"** 按钮
4. 您的当前作品将被保存为一个新收藏

#### 查看所有收藏
1. 点击顶部的 **"Favorites"** 按钮
2. 您将看到所有已保存的收藏，显示为缩略图网格

#### 加载收藏（替换当前画布）
1. 打开收藏面板
2. 点击要加载的收藏
3. 点击 **"Load"** 按钮
4. 该画布将加载到您的编辑区域，**替换当前内容**

#### 复制收藏（添加到当前画布）
1. 打开收藏面板
2. 点击收藏上的 **"Copy"** 按钮（绿色图标）
3. 收藏中的元素将被添加到您当前的画布上
4. 元素会略微平移以避免完全重叠

#### 下载收藏为图片
1. 打开收藏面板
2. 点击收藏上的下载图标
3. PNG 图片将下载到您的电脑

#### 删除收藏
1. 打开收藏面板
2. 点击收藏上的删除图标（垃圾桶）
3. 确认删除

### 技术细节
- **存储位置**：浏览器本地存储（`localStorage`）
- **数据结构**：`favoritesStore` Zustand Store
- **限制**：受浏览器存储限制约束（通常 5-10MB）
- **隐私**：所有数据完全存储在您的设备上，不上传到服务器

### 使用场景
✅ 保存不同的设计风格供日后参考
✅ 创建设计模板供快速复用
✅ 备份重要的设计作品
✅ 组织您的创意工作流

---

## 功能 2：公开分享链接

### 概述
生成一个公开链接，让其他人可以查看您的画布，无需登录。访问者可以复制您的设计或下载为 PNG。

### 如何使用

#### 创建分享链接
1. 在顶部导航栏中找到 **"Share"** 按钮（分享图标）
2. 点击打开分享面板
3. **（可选）** 在"Your Name"字段中输入您的名字
4. 点击 **"Generate Link"** 按钮
5. 系统将生成一个唯一的分享链接

#### 复制分享链接
1. 在分享面板中，您会看到生成的分享链接
2. 点击 **"Copy"** 按钮自动复制链接到剪贴板
3. 现在您可以在社交媒体、邮件或聊天中粘贴链接

#### 分享链接格式
```
https://omnicanvas-frontend.vercel.app/share/share_1729xxxxx_abc1234
```

### 查看分享的画布

#### 访问他人的分享
1. 当您收到分享链接时，直接点击或在浏览器中打开
2. 页面将加载共享的画布
3. 右侧会显示创建者信息和浏览统计

#### 在分享查看器中的操作
- **查看**：查看原始创建者的完整画布
- **复制到我的画布**：将共享画布复制到您自己的编辑区域
- **下载 PNG**：下载画布为高质量 PNG 图片
- **复制链接**：复制当前分享链接以进一步分享

### 分享链接属性
- **有效期**：30 天（之后自动过期）
- **浏览追踪**：系统会追踪分享被查看的次数
- **隐私**：分享链接中没有身份验证，任何拥有链接的人都可以访问

### 技术细节
- **存储**：服务器端内存存储（演示版）
- **API 端点**：
  - `POST /api/shares` - 创建分享
  - `GET /api/shares/:shareId` - 获取分享
  - `DELETE /api/shares/:shareId` - 删除分享
  - `GET /api/shares-stats` - 获取统计信息
- **数据格式**：画布数据以 JSON 格式存储，缩略图以 Base64 编码存储
- **过期时间**：30 天后自动删除

### 生产环境建议
对于生产部署，建议：
- 使用数据库（MongoDB、PostgreSQL 等）而不是内存存储
- 实现分享权限管理（公开/私密）
- 添加分享密码保护功能
- 使用 CDN 缓存缩略图
- 实现自动清理过期分享的任务

### 使用场景
✅ 向朋友和家人展示您的艺术作品
✅ 在设计评审中获取反馈
✅ 发布作品到社交媒体
✅ 创建设计投资组合
✅ 与团队协作和评论
✅ 举办线上艺术展览

---

## 分析和追踪

两个新功能都集成了分析追踪：

### 收藏功能事件
- `favorite_saved` - 保存新收藏
- `favorite_loaded` - 加载收藏
- `favorite_copied` - 复制收藏元素
- `favorite_downloaded` - 下载收藏
- `favorite_deleted` - 删除收藏

### 分享功能事件
- `share_created` - 创建分享链接
- `share_opened` - 打开分享面板
- `share_link_copied` - 复制分享链接
- `share_link_opened` - 打开分享链接
- `share_viewed` - 查看分享（访问者）
- `shared_canvas_copied` - 复制共享画布
- `shared_canvas_downloaded` - 下载共享画布
- `shared_canvas_link_copied` - 复制分享链接

这些事件可在 Google Analytics 中查看，帮助您了解用户如何使用这些功能。

---

## 常见问题

### Q: 我的收藏会被永久保存吗？
**A:** 收藏存储在您的浏览器本地存储中。如果您清除浏览器数据或更换设备，收藏将丢失。对于永久保存，请考虑下载为 PNG 或使用分享功能。

### Q: 分享链接的有效期是多久？
**A:** 分享链接有效期为 30 天。之后将自动过期并无法访问。

### Q: 其他人可以编辑我分享的画布吗？
**A:** 不可以。访问者只能查看和复制您的作品，无法修改原始分享。他们可以复制到自己的画布进行编辑。

### Q: 我可以设置分享密码吗？
**A:** 当前版本不支持密码保护。分享链接对拥有链接的任何人都是公开的。

### Q: 我可以删除已分享的链接吗？
**A:** 可以。您可以通过分享面板生成新链接或等待 30 天自动过期。完全删除分享功能还未实现。

### Q: 收藏和分享数据存储在哪里？
**A:**
- **收藏**：完全存储在您的浏览器本地存储中
- **分享**：临时存储在服务器内存中（演示版）

### Q: 这些功能支持离线使用吗？
**A:**
- **收藏**：是，完全离线工作
- **分享**：否，需要互联网连接来生成和访问分享链接

---

## 未来改进计划

我们计划在未来版本中添加：
- ☐ 云端收藏同步（跨设备）
- ☐ 分享密码保护
- ☐ 分享权限管理（编辑权限）
- ☐ 实时协作编辑
- ☐ 评论和反馈系统
- ☐ 社区画廊
- ☐ 收藏标签和分类
- ☐ 分享预览优化

---

## 反馈和问题

如果您遇到任何问题或有改进建议，请通过以下方式反馈：
- 提交 GitHub Issue
- 发送邮件至我们的支持团队
- 在 Discord 社区讨论

感谢您使用 OmniCanvas！🎨
