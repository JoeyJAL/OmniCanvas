# 🚀 OmniCanvas Analytics 設置指南

## 零停機部署策略

### 📊 **安全部署流程**

#### 1. **當前狀態**
- ✅ 分析代碼已準備好，但預設為**關閉狀態**
- ✅ 不會影響現有用戶的使用體驗
- ✅ 可以隨時啟用，無需重新部署

#### 2. **啟用步驟**

##### A. **設置 Google Analytics 4**
1. 前往 [Google Analytics](https://analytics.google.com)
2. 登入並創建新的 GA4 資源
3. 取得追蹤 ID (格式: `G-XXXXXXXXXX`)

##### B. **配置環境變數**
在 Vercel 專案設定中添加：
```bash
VITE_GA_TRACKING_ID=G-XXXXXXXXXX  # 您的 GA4 追蹤 ID
```

##### C. **部署啟用**
部署後分析會自動啟用，追蹤以下數據：
- 👥 用戶訪問量和地理位置
- 📄 頁面瀏覽次數
- 🎨 AI 圖像生成次數
- 📊 範本使用統計
- 🔧 功能使用頻率

### 🛡️ **安全特性**

#### **隱私保護**
- ✅ IP 地址匿名化
- ✅ 尊重 "Do Not Track" 設定
- ✅ 無個人身份資訊收集

#### **錯誤容錯**
- ✅ 分析失敗不會影響主要功能
- ✅ 優雅的錯誤處理
- ✅ 開發環境預設關閉

#### **Feature Flags**
- 📄 頁面追蹤：可獨立開關
- 📊 事件追蹤：可獨立開關
- 🔧 錯誤追蹤：可獨立開關

### 📈 **追蹤的數據類型**

#### **用戶行為**
- 頁面訪問路徑
- 功能使用頻率
- 會話時長
- 跳出率

#### **AI 功能使用**
- 文字轉圖像生成次數
- 圖像轉圖像生成次數
- 圖像增強使用次數
- 範本選擇統計

#### **技術指標**
- 錯誤發生率
- 功能成功率
- 載入性能

### 🎯 **分析報告**

啟用後，您可以在 Google Analytics 中查看：

1. **即時報告** - 當前用戶活動
2. **用戶報告** - 用戶來源和行為
3. **事件報告** - AI 功能使用統計
4. **技術報告** - 錯誤和性能數據

### 🔧 **開發測試**

如需在開發環境測試分析：
```bash
# 開發環境啟用分析（測試用）
VITE_ENABLE_ANALYTICS_DEV=true
VITE_GA_TRACKING_ID=G-XXXXXXXXXX
```

### 🚀 **部署建議**

1. **先在測試環境驗證**
2. **逐步啟用功能**（先啟用頁面追蹤，再啟用事件追蹤）
3. **監控性能影響**（分析代碼經過優化，影響微乎其微）

### 💡 **即時啟用步驟**

想要立即啟用分析？只需：

1. 在 Vercel 專案設定中添加 `VITE_GA_TRACKING_ID`
2. 重新部署（約 2-3 分鐘）
3. 分析會自動開始收集數據

**零停機時間，現有用戶不受影響！**